[{"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\index.js":"1","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\App.js":"2","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\reportWebVitals.js":"3","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\pages\\Home.js":"4","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\pages\\Checkout.js":"5","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\components\\Navbar.js":"6","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\components\\Product.js":"7","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\components\\Subtotal.js":"8","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\app\\store.js":"9","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\features\\basketSlice.js":"10","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\pages\\Login.js":"11","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\pages\\Register.js":"12","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\firebase.js":"13","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\features\\userSlice.js":"14","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\components\\CheckoutItem.js":"15","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\pages\\Payment.js":"16","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\axios.js":"17","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\pages\\Orders.js":"18","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\components\\Order.js":"19"},{"size":620,"mtime":1613147881599,"results":"20","hashOfConfig":"21"},{"size":2136,"mtime":1613411947791,"results":"22","hashOfConfig":"21"},{"size":362,"mtime":499162500000,"results":"23","hashOfConfig":"21"},{"size":2769,"mtime":1613163316756,"results":"24","hashOfConfig":"21"},{"size":1489,"mtime":1613306682321,"results":"25","hashOfConfig":"21"},{"size":2235,"mtime":1613421276718,"results":"26","hashOfConfig":"21"},{"size":1202,"mtime":1613150902492,"results":"27","hashOfConfig":"21"},{"size":1432,"mtime":1613576807849,"results":"28","hashOfConfig":"21"},{"size":268,"mtime":1613222182972,"results":"29","hashOfConfig":"21"},{"size":994,"mtime":1613411969388,"results":"30","hashOfConfig":"21"},{"size":2115,"mtime":1613228690433,"results":"31","hashOfConfig":"21"},{"size":2055,"mtime":1613228703640,"results":"32","hashOfConfig":"21"},{"size":495,"mtime":1613218709907,"results":"33","hashOfConfig":"21"},{"size":488,"mtime":1613224456725,"results":"34","hashOfConfig":"21"},{"size":956,"mtime":1613477595349,"results":"35","hashOfConfig":"21"},{"size":4922,"mtime":1613494009268,"results":"36","hashOfConfig":"21"},{"size":245,"mtime":1613494019550,"results":"37","hashOfConfig":"21"},{"size":1231,"mtime":1613477271853,"results":"38","hashOfConfig":"21"},{"size":1231,"mtime":1613477862870,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"u4yxwt",{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"42"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72","usedDeprecatedRules":"42"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75","usedDeprecatedRules":"42"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\index.js",[],["82","83"],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\App.js",["84"],"import React, { useEffect } from \"react\";\nimport \"./App.css\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport Home from \"./pages/Home\";\nimport Checkout from \"./pages/Checkout\";\nimport Login from \"./pages/Login\";\nimport Register from \"./pages/Register\";\nimport Payment from \"./pages/Payment\";\nimport { auth } from \"./firebase\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { loginUser, signOutUser, selectUser } from \"./features/userSlice\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport Orders from \"./pages/Orders\";\n\nconst promise = loadStripe(\n  \"pk_test_51IL4ZQBX1dF3b6qDe4132PmrJwXsWdhmrM5CEAJr9FbfAkuTWXxCGdPDuBfOHQ8wwvAvEhPTFUNMtMNKBwP8bBIV00X5fFavwo\"\n);\n\nfunction App() {\n  const dispatch = useDispatch();\n  const user = useSelector(selectUser);\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged((auth) => {\n      if (auth) {\n        // user is logged in\n        dispatch(\n          loginUser({\n            id: auth.uid,\n            email: auth.email,\n          })\n        );\n      } else {\n        // user is logged out\n        dispatch(signOutUser);\n      }\n    });\n    return unsubscribe;\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <Switch>\n          <Route exact path=\"/\">\n            <Home />\n          </Route>\n          <Route path=\"/checkout\">\n            {user ? <Checkout /> : <Redirect to=\"/login\" />}\n          </Route>\n          <Route path=\"/login\">{!user ? <Login /> : <Redirect to=\"/\" />}</Route>\n          <Route path=\"/register\">\n            {!user ? <Register /> : <Redirect to=\"/\" />}\n          </Route>\n          <Route path=\"/payment\">\n            {user ? (\n              <Elements stripe={promise}>\n                <Payment />\n              </Elements>\n            ) : (\n              <Redirect to=\"/login\" />\n            )}\n          </Route>\n          <Route path=\"/orders\">\n            {user ? <Orders /> : <Redirect to=\"/login\" />}\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\reportWebVitals.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\pages\\Home.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\pages\\Checkout.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\components\\Navbar.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\components\\Product.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\components\\Subtotal.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\app\\store.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\features\\basketSlice.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\pages\\Login.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\pages\\Register.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\firebase.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\features\\userSlice.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\components\\CheckoutItem.js",["85"],"import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { removeFromBasket } from \"../features/basketSlice\";\r\n\r\nconst CheckoutItem = ({ id, title, image, price, hideButton }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const removeItemFromBasket = (item_id) => {\r\n    console.log(item_id);\r\n    dispatch(\r\n      removeFromBasket({\r\n        id: item_id,\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"checkout__item\">\r\n      <div className=\"checkout__item__left\">\r\n        <img src={image} />\r\n      </div>\r\n      <div className=\"checkout__item__right\">\r\n        <h2>{title}</h2>\r\n        <div className=\"checkout__item__price\">\r\n          <small>$</small>\r\n          <p>{price}</p>\r\n        </div>\r\n        {!hideButton && (\r\n          <button onClick={() => removeItemFromBasket(id)}>\r\n            Remove from basket\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutItem;\r\n","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\pages\\Payment.js",["86","87"],"import { React, useEffect, useRef, useState } from \"react\";\r\nimport \"../css/Payment.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { selectUser } from \"../features/userSlice\";\r\nimport { selectBasket, emptyBasket } from \"../features/basketSlice\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport CheckoutItem from \"../components/CheckoutItem\";\r\nimport { useStripe, useElements, CardElement } from \"@stripe/react-stripe-js\";\r\nimport CurrencyFormat from \"react-currency-format\";\r\nimport { calculateTotalPrice } from \"../features/basketSlice\";\r\nimport axios from \"../axios\";\r\nimport { db } from \"../firebase\";\r\n\r\nconst Payment = () => {\r\n  const basket = useSelector(selectBasket);\r\n  const user = useSelector(selectUser);\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const [error, setError] = useState(null);\r\n  const [disabled, setDisabled] = useState(true);\r\n  const [proccessing, setProccessing] = useState(false);\r\n  const [succeeded, setSucceeded] = useState(false);\r\n  const [clientSecret, setClientSecret] = useState(null);\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    // go and get client secret from backend in order to charge a cient\r\n    const getClientSecret = async () => {\r\n      const response = await axios({\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Access-Control-Allow-Origin\": true,\r\n        },\r\n        url: \"/payments/create?total=\" + calculateTotalPrice(basket) * 100,\r\n      });\r\n\r\n      setClientSecret(response.data.clientSecret);\r\n    };\r\n\r\n    getClientSecret();\r\n  }, [basket]);\r\n\r\n  console.log(clientSecret);\r\n\r\n  const handleForm = async (e) => {\r\n    e.preventDefault();\r\n    setProccessing(true);\r\n\r\n    const payload = await stripe\r\n      .confirmCardPayment(clientSecret, {\r\n        payment_method: {\r\n          card: elements.getElement(CardElement),\r\n        },\r\n      })\r\n      .then(({ paymentIntent }) => {\r\n        console.log(paymentIntent);\r\n        dispatch(emptyBasket());\r\n        db.collection(\"orders\")\r\n          .add({\r\n            user_id: user?.id,\r\n            order_id: paymentIntent.id,\r\n            total_price: paymentIntent.amount,\r\n            date: paymentIntent.created,\r\n            items: basket,\r\n          })\r\n          .then((promise) => console.log(promise))\r\n          .catch((err) => console.log(err.message));\r\n\r\n        setSucceeded(true);\r\n        setProccessing(false);\r\n        setError(null);\r\n        history.replace(\"/orders\");\r\n      });\r\n  };\r\n\r\n  const handleCardInput = (e) => {\r\n    setDisabled(e.empty);\r\n    setError(e.error ? e.error.message : \"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"payment\">\r\n      <Navbar />\r\n      <div className=\"payment__itemsCount\">\r\n        <h3>\r\n          Checkout (\r\n          <Link className=\"payment__itemsCount__link\" to=\"/checkout\">\r\n            {basket.length}\r\n          </Link>{\" \"}\r\n          items)\r\n        </h3>\r\n      </div>\r\n      <div className=\"payment__delivery\">\r\n        <p className=\"payment__item\">Delivery address</p>\r\n        <div className=\"payment__item__content\">\r\n          <span>{user.email}</span>\r\n          <span>1234 Dummy address</span>\r\n          <span>Washington, DC</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"payment__itemsReview\">\r\n        <p className=\"payment__item\">Review items and delivery</p>\r\n        <div className=\"payment__item__content\">\r\n          {basket.map((item) => (\r\n            <CheckoutItem\r\n              key={item.id}\r\n              id={item.id}\r\n              title={item.title}\r\n              image={item.image}\r\n              price={item.price}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div className=\"payment__cardProccessing\">\r\n        <p className=\"payment__item\">Payment method</p>\r\n        <div className=\"payment__item__content\">\r\n          <form onSubmit={handleForm}>\r\n            <CardElement onChange={handleCardInput} />\r\n            <div className=\"payment__totalPrice\">\r\n              <CurrencyFormat\r\n                renderText={(value) => (\r\n                  <>\r\n                    <p className=\"payment__total\">Order total: {value}</p>\r\n                  </>\r\n                )}\r\n                decimalScale={2}\r\n                value={calculateTotalPrice(basket)}\r\n                displayType={\"text\"}\r\n                thousandSeparator={true}\r\n                prefix={\"$\"}\r\n              />\r\n              <button\r\n                class=\"payment__orderBtn\"\r\n                disabled={proccessing || disabled || succeeded}\r\n              >\r\n                <span>{proccessing ? \"Proccessing\" : \"Complete Order\"}</span>\r\n              </button>\r\n\r\n              {error && <div>{error}</div>}\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Payment;\r\n","C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\axios.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\pages\\Orders.js",[],"C:\\Users\\Zdravo\\Documents\\project\\amazon-clone\\amazon-clone\\src\\components\\Order.js",[],{"ruleId":"88","replacedBy":"89"},{"ruleId":"90","replacedBy":"91"},{"ruleId":"92","severity":1,"message":"93","line":45,"column":6,"nodeType":"94","endLine":45,"endColumn":8,"suggestions":"95"},{"ruleId":"96","severity":1,"message":"97","line":20,"column":9,"nodeType":"98","endLine":20,"endColumn":28},{"ruleId":"99","severity":1,"message":"100","line":1,"column":28,"nodeType":"101","messageId":"102","endLine":1,"endColumn":34},{"ruleId":"99","severity":1,"message":"103","line":51,"column":11,"nodeType":"101","messageId":"102","endLine":51,"endColumn":18},"no-native-reassign",["104"],"no-negated-in-lhs",["105"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["106"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","no-unused-vars","'useRef' is defined but never used.","Identifier","unusedVar","'payload' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"107","fix":"108"},"Update the dependencies array to be: [dispatch]",{"range":"109","text":"110"},[1254,1256],"[dispatch]"]